% pagelayout.tex
% Copyright (C) 2018 Kelly Smith.
%
% This work may be distributed and/or modified under the
% conditions of the LaTeX Project Public License (LPPL),
% either version 1.3c of this license or (at your option)
% any later version. The latest version of this license
% is in the file:
%
%   http://www.latex-project.org/lppl.txt
%
% This work has the LPPL maintenance status `maintained'.
% 
% The Current Maintainer of this work is Kelly Smith.
%
% This work consists of the files listed in the README.

\ProvidesExplFile{pagelayout.tex}{2018/10/06}{0.0.0}{Page layout template system for the Soranus class.}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Variables
%

% Here, I create aliases for some TeX Primitives.

\cs_new:Npn \g__soranus_paper_width_dim
  {\tex_pagewidth:D}

\cs_new:Npn \g__soranus_paper_height_dim
  {\tex_pageheight:D}



% Here, I create aliases to the 2e layout parameters.

\cs_new:Npn \g__soranus_top_margin_dim
  {\topmargin}

\cs_new:Npn \g__soranus_head_height_dim
  {\headheight}

\cs_new:Npn \g__soranus_foot_sep_dim
  {\footskip}

\cs_new:Npn \g__soranus_text_width_dim
  {\textwidth}

\cs_new:Npn \g__soranus_text_height_dim
  {\textheight}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Template
%

\DeclareObjectType {pagelayout} {0}


\DeclareTemplateInterface {pagelayout} {standard} {0}
  {
    edge-trim    : length  = 0pt,
    top-trim     : length  = 0pt,
    page-width   : length  = 210mm,
    page-height  : length  = 297mm,
    spine-margin : length  = 10mm,
    top-margin   : length  = 20mm,
    text-width   : length  = 30pc,
    text-height  : length  = 50pc
  }


%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%
% Implementation
%

\bool_new:N \g__soranus_landscape_bool

\dim_new:N \g__soranus_pagelayout_edge_trim_dim
\dim_new:N \g__soranus_pagelayout_top_trim_dim
\dim_new:N \g__soranus_pagelayout_page_width_dim
\dim_new:N \g__soranus_pagelayout_page_height_dim
\dim_new:N \g__soranus_pagelayout_spine_margin_dim
\dim_new:N \g__soranus_pagelayout_top_margin_dim
\dim_new:N \g__soranus_pagelayout_text_width_dim
\dim_new:N \g__soranus_pagelayout_text_height_dim

\DeclareTemplateCode {pagelayout} {standard} {0}
  {
    edge-trim    = global \g__soranus_pagelayout_edge_trim_dim,
    top-trim     = global \g__soranus_pagelayout_top_trim_dim,
    page-width   = global \g__soranus_pagelayout_page_width_dim,
    page-height  = global \g__soranus_pagelayout_page_height_dim,
    spine-margin = global \g__soranus_pagelayout_spine_margin_dim,
    top-margin   = global \g__soranus_pagelayout_top_margin_dim,
    text-width   = global \g__soranus_pagelayout_text_width_dim,
    text-height  = global \g__soranus_pagelayout_text_height_dim
  }
  {
    \AssignTemplateKeys
%    \dim_gset_eq:NN \oddsidemargin \g__soranus_pagelayout_spine_margin_dim
%    \dim_gzero:N \g__soranus_head_height_dim
%    \dim_gzero:N \headsep
%    \dim_gzero:N \g__soranus_head_sep_dim
%    \dim_gset_eq:NN \g__soranus_top_margin_dim \g__soranus_pagelayout_top_margin_dim
    \dim_gset_eq:NN \g__soranus_text_width_dim \g__soranus_pagelayout_text_width_dim
    \dim_gset_eq:NN \g__soranus_text_height_dim \g__soranus_pagelayout_text_height_dim
  }
